---
/**
 * TimelineItem - Individual timeline entry component
 * Renders a single milestone with dot marker, connector line, and content
 * Layout: date on left, dot in center, content on right
 */
import type { TimelineItemProps } from './types';

// Tell TypeScript what props this component accepts
interface Props extends TimelineItemProps {}

// Extract props from Astro.props (the data passed to this component)
const { date, title, description, link, image, isFirst = false, isLast = false, lineHeight } = Astro.props;

// Dynamic HTML element: use <a> if link exists, otherwise <div>
const Tag = link ? 'a' : 'div';

// Link attributes: only add href/target/rel if link exists
const linkProps = link ? { href: link, target: '_blank', rel: 'noopener noreferrer' } : {};

// Content style for proportional spacing
const contentStyle = lineHeight ? `padding-bottom: ${lineHeight}rem` : undefined;
---

<div class="aj-item">
  {/* Left: Date */}
  <span class="aj-date">{date}</span>

  {/* Center: Marker (dot + line) */}
  <div class="aj-marker">
    {isFirst && <div class="aj-line aj-line-top" />}
    <div class="aj-dot" />
    {!isLast ? <div class="aj-line" /> : <div class="aj-line aj-line-bottom" />}
  </div>

  {/* Right: Content */}
  <Tag class:list={['aj-content', { 'aj-link': link }]} style={contentStyle} {...linkProps}>
    <div class="aj-content-inner">
      <div class="aj-text">
        <h3 class="aj-title">{title}</h3>
        {description && <p class="aj-desc">{description}</p>}
        <slot />
      </div>
      {image && <img class="aj-image" src={image} alt={title} />}
    </div>
  </Tag>
</div>
