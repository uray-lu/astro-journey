---
/**
 * TimelineItem - Individual timeline entry component
 * Renders a single milestone with dot marker, connector line, and content
 * Layout: date on left, dot in center, content on right
 */
import type { TimelineItemProps } from './types';

// Tell TypeScript what props this component accepts
interface Props extends TimelineItemProps {}

// Extract props from Astro.props (the data passed to this component)
const { date, title, description, link, image, isLast = false } = Astro.props;

// Dynamic HTML element: use <a> if link exists, otherwise <div>
const Tag = link ? 'a' : 'div';

// Link attributes: only add href/target/rel if link exists
const linkProps = link ? { href: link, target: '_blank', rel: 'noopener noreferrer' } : {};
---

<div class="aj-item">
  {/* Left: Date */}
  <span class="aj-date">{date}</span>

  {/* Center: Marker (dot + line) */}
  <div class="aj-marker">
    <div class="aj-dot" />
    {!isLast && <div class="aj-line" />}
  </div>

  {/* Right: Content */}
  <Tag class:list={['aj-content', { 'aj-link': link }]} {...linkProps}>
    <h3 class="aj-title">{title}</h3>
    {description && <p class="aj-desc">{description}</p>}
    {image && <img class="aj-image" src={image} alt={title} />}
    <slot />
  </Tag>
</div>
